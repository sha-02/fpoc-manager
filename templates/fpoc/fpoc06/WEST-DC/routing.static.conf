# Static default-routes

{% if FOS >= 7_000_000 %}
config router static
    edit 1
        set sdwan-zone "internet"
        set comment "Default-route via Internet links"
    next
end
{% else %}
config router static
    edit 1
        set device "Internet_1"
        set gateway {{wan.inet1.subnet}}.254
        set comment "Default-route via Internet-1"
    next
    edit 2
        set device "Internet_2"
        set gateway {{wan.inet2.subnet}}.254
        set comment "Default-route via Internet-2"
    next
    edit 3
        set device "MPLS"
        set dstaddr "MPLS_Underlay"
        set gateway {{wan.mpls1.subnet}}.254
        set comment "MPLS underlay"
    next
end
{% endif %}

{# ================= Remote DC overlays (FOS 6.4) ======================================================== #}
{% if FOS < 7_000_000 %}
    ## ----------------------------------------------------------------------------
    # Remote DC overlays (FOS 6.4)
    #
    # Goal is to reach DC3 Edge overlays via the same inter-dc overlays (stickiness):
    # - DC3 Edge INET1 overlay is reached via INET1 inter-dc overlay
    # - DC3 Edge INET2 overlay is reached via INET2 inter-dc overlay
    # - DC3 Edge MPLS overlay is reached via MPLS inter-dc overlay

    config router static
        edit 11
            set dstaddr "Overlay_W-DC3_EDGE_INET1"
            set device "W{{dc_id}}E3_INET1"
            set comment "Reach W-DC3_EDGE_INET1 overlay via INET1 inter-dc overlay"
        next
        edit 12
            set dstaddr "Overlay_W-DC3_EDGE_INET2"
            set device "W{{dc_id}}E3_INET2"
            set comment "Reach W-DC3_EDGE_INET2 overlay via INET2 inter-dc overlay"
        next
        edit 13
            set dstaddr "Overlay_W-DC3_EDGE_MPLS"
            set device "W{{dc_id}}E3_MPLS"
            set comment "Reach W-DC3_EDGE_MPLS overlay via MPLS inter-dc overlay"
        next
    end
{% endif %}

{% if FOS >= 7_000_000 %}
config router bgp
    set reminder "Use BGP to advertise the remote overlays and skip usage of static routes"
end
{% endif %}

