# BGP peerings over VPN overlays

config router bgp
    {% if FOS >= 7_000_000 %}
        set as {{local_ASN_FOS7}}
    {% else %}
        set as {{local_ASN_FOS6}}
    {% endif %}
    set router-id 10.0.{{branch_id}}.1
    set keepalive-timer 10
    set holdtime-timer 30
    set ibgp-multipath enable
    {% if FOS >= 7_000_000 %}
        set recursive-next-hop enable
    {% endif %}
    config neighbor
    {% if region == 'West' %}
        edit "10.201.{{datacenter.west.first.id}}.254"
    {% else %} {# East region #}
        edit "10.201.{{datacenter.east.first.id}}.254"
    {% endif %}
            set interface "H1_INET1"
            {% if FOS >= 7_000_000 %}
                set remote-as {{local_ASN_FOS7}}
            {% else %}
                set remote-as {{local_ASN_FOS6}}
            {% endif %}
            set additional-path receive
            set connect-timer 1
            set advertisement-interval 1
            set link-down-failover enable
            set soft-reconfiguration enable
        next
    {% if region == 'West' %}
        edit "10.202.{{datacenter.west.first.id}}.254"
    {% else %} {# East region #}
        edit "10.202.{{datacenter.east.first.id}}.254"
    {% endif %}
            set interface "H1_INET2"
            {% if FOS >= 7_000_000 %}
                set remote-as {{local_ASN_FOS7}}
            {% else %}
                set remote-as {{local_ASN_FOS6}}
            {% endif %}
            set additional-path receive
            set connect-timer 1
            set advertisement-interval 1
            set link-down-failover enable
            set soft-reconfiguration enable
        next
    {% if region == 'West' %}
        edit "10.203.{{datacenter.west.first.id}}.254"
    {% else %} {# East region #}
        edit "10.203.{{datacenter.east.first.id}}.254"
    {% endif %}
            set interface "H1_MPLS"
            {% if FOS >= 7_000_000 %}
                set remote-as {{local_ASN_FOS7}}
            {% else %}
                set remote-as {{local_ASN_FOS6}}
            {% endif %}
            set additional-path receive
            set connect-timer 1
            set advertisement-interval 1
            set link-down-failover enable
            set soft-reconfiguration enable
        next
    {% if region == 'West' %}
        edit "10.201.{{datacenter.west.second.id}}.254"
    {% else %} {# East region #}
        edit "10.201.{{datacenter.east.second.id}}.254"
    {% endif %}
            set interface "H2_INET1"
            {% if FOS >= 7_000_000 %}
                set remote-as {{local_ASN_FOS7}}
            {% else %}
                set remote-as {{local_ASN_FOS6}}
            {% endif %}
            set additional-path receive
            set connect-timer 1
            set advertisement-interval 1
            set link-down-failover enable
            set soft-reconfiguration enable
        next
    {% if region == 'West' %}
        edit "10.202.{{datacenter.west.second.id}}.254"
    {% else %} {# East region #}
        edit "10.202.{{datacenter.east.second.id}}.254"
    {% endif %}
            set interface "H2_INET2"
            {% if FOS >= 7_000_000 %}
                set remote-as {{local_ASN_FOS7}}
            {% else %}
                set remote-as {{local_ASN_FOS6}}
            {% endif %}
            set additional-path receive
            set connect-timer 1
            set advertisement-interval 1
            set link-down-failover enable
            set soft-reconfiguration enable
        next
    {% if region == 'West' %}
        edit "10.203.{{datacenter.west.second.id}}.254"
    {% else %} {# East region #}
        edit "10.203.{{datacenter.east.second.id}}.254"
    {% endif %}
            set interface "H2_MPLS"
            {% if FOS >= 7_000_000 %}
                set remote-as {{local_ASN_FOS7}}
            {% else %}
                set remote-as {{local_ASN_FOS6}}
            {% endif %}
            set additional-path receive
            set connect-timer 1
            set advertisement-interval 1
            set link-down-failover enable
            set soft-reconfiguration enable
        next
    end
    config network
        edit 1
            set prefix 10.0.{{branch_id}}.0 255.255.255.0
        next
    end
end

#
# BGP routes
#

{% if branch_id == 1 and FOS >= 7_000_000 and cross_region_advpn %}
# FGT-W-BR1 # alias bgp_rib
# Routing table for VRF=0
# B       10.0.2.0/24 [200/0] via 10.201.1.2 [3] (recursive via H1_INET1 tunnel 100.64.11.1), 00:56:34
#                     [200/0] via 10.202.1.2 [3] (recursive via H1_INET2 tunnel 100.64.12.1), 00:56:34
#                     [200/0] via 10.203.1.2 [3] (recursive via H1_MPLS tunnel 10.0.14.1), 00:56:34
#                     [200/0] via 10.201.2.2 [3] (recursive via H2_INET1 tunnel 100.64.21.2), 00:56:34
#                     [200/0] via 10.202.2.2 [3] (recursive via H2_INET2 tunnel 100.64.22.2), 00:56:34
#                     [200/0] via 10.203.2.2 [3] (recursive via H2_MPLS tunnel 10.0.24.2), 00:56:34
# B       10.0.3.0/24 [200/0] via 10.201.3.1 [6] (recursive via H1_INET1 tunnel 100.64.11.1), 00:24:18
#                                                (recursive via H2_INET1 tunnel 100.64.21.2), 00:24:18
#                     [200/0] via 10.202.3.1 [6] (recursive via H1_INET2 tunnel 100.64.12.1), 00:24:18
#                                                (recursive via H2_INET2 tunnel 100.64.22.2), 00:24:18
#                     [200/0] via 10.203.3.1 [6] (recursive via H1_MPLS tunnel 10.0.14.1), 00:24:18
#                                                (recursive via H2_MPLS tunnel 10.0.24.2), 00:24:18
# B       10.1.0.0/24 [200/0] via 10.201.1.254 (recursive via H1_INET1 tunnel 100.64.11.1), 00:56:39
#                     [200/0] via 10.202.1.254 (recursive via H1_INET2 tunnel 100.64.12.1), 00:56:39
#                     [200/0] via 10.203.1.254 (recursive via H1_MPLS tunnel 10.0.14.1), 00:56:39
# B       10.2.0.0/24 [200/0] via 10.201.2.254 (recursive via H2_INET1 tunnel 100.64.21.2), 00:56:40
#                     [200/0] via 10.202.2.254 (recursive via H2_INET2 tunnel 100.64.22.2), 00:56:40
#                     [200/0] via 10.203.2.254 (recursive via H2_MPLS tunnel 10.0.24.2), 00:56:40
# B       10.3.0.0/24 [200/0] via 10.201.13.2 [3] (recursive via H1_INET1 tunnel 100.64.11.1), 00:24:18
#                                                 (recursive via H2_INET1 tunnel 100.64.21.2), 00:24:18
#                     [200/0] via 10.202.13.2 [3] (recursive via H1_INET2 tunnel 100.64.12.1), 00:24:18
#                                                 (recursive via H2_INET2 tunnel 100.64.22.2), 00:24:18
#                     [200/0] via 10.203.13.2 [3] (recursive via H1_MPLS tunnel 10.0.14.1), 00:24:18
#                                                 (recursive via H2_MPLS tunnel 10.0.24.2), 00:24:18
#                     [200/0] via 10.201.23.2 [3] (recursive via H1_INET1 tunnel 100.64.11.1), 00:24:18
#                                                 (recursive via H2_INET1 tunnel 100.64.21.2), 00:24:18
#                     [200/0] via 10.202.23.2 [3] (recursive via H1_INET2 tunnel 100.64.12.1), 00:24:18
#                                                 (recursive via H2_INET2 tunnel 100.64.22.2), 00:24:18
#                     [200/0] via 10.203.23.2 [3] (recursive via H1_MPLS tunnel 10.0.14.1), 00:24:18
#                                                 (recursive via H2_MPLS tunnel 10.0.24.2), 00:24:18
# B       10.200.0.0/14 [200/0] via 10.201.1.254 (recursive via H1_INET1 tunnel 100.64.11.1), 00:56:32
#                       [200/0] via 10.202.1.254 (recursive via H1_INET2 tunnel 100.64.12.1), 00:56:32
#                       [200/0] via 10.203.1.254 (recursive via H1_MPLS tunnel 10.0.14.1), 00:56:32
#                       [200/0] via 10.201.2.254 (recursive via H2_INET1 tunnel 100.64.21.2), 00:56:32
#                       [200/0] via 10.202.2.254 (recursive via H2_INET2 tunnel 100.64.22.2), 00:56:32
#                       [200/0] via 10.203.2.254 (recursive via H2_MPLS tunnel 10.0.24.2), 00:56:32
# B       10.201.0.0/16 [200/0] via 10.201.1.254 (recursive via H1_INET1 tunnel 100.64.11.1), 00:56:32
#                       [200/0] via 10.201.2.254 (recursive via H2_INET1 tunnel 100.64.21.2), 00:56:32
# B       10.202.0.0/16 [200/0] via 10.202.1.254 (recursive via H1_INET2 tunnel 100.64.12.1), 00:56:32
#                       [200/0] via 10.202.2.254 (recursive via H2_INET2 tunnel 100.64.22.2), 00:56:32
# B       10.203.0.0/16 [200/0] via 10.203.1.254 (recursive via H1_MPLS tunnel 10.0.14.1), 00:56:32
#                       [200/0] via 10.203.2.254 (recursive via H2_MPLS tunnel 10.0.24.2), 00:56:32
{% endif %}

{% if branch_id == 1 and FOS >= 7_000_000 and not cross_region_advpn %}
# FGT-W-BR1 # alias bgp_rib
# Routing table for VRF=0
# B       10.0.0.0/14 [200/0] via 10.201.1.254 (recursive via H1_INET1 tunnel 100.64.11.1), 00:02:34
#                     [200/0] via 10.202.1.254 (recursive via H1_INET2 tunnel 100.64.12.1), 00:02:34
#                     [200/0] via 10.203.1.254 (recursive via H1_MPLS tunnel 10.0.14.1), 00:02:34
#                     [200/0] via 10.201.2.254 (recursive via H2_INET1 tunnel 100.64.21.2), 00:02:34
#                     [200/0] via 10.202.2.254 (recursive via H2_INET2 tunnel 100.64.22.2), 00:02:34
#                     [200/0] via 10.203.2.254 (recursive via H2_MPLS tunnel 10.0.24.2), 00:02:34
# B       10.0.2.0/24 [200/0] via 10.201.1.2 [3] (recursive via H1_INET1 tunnel 100.64.11.1), 00:02:34
#                     [200/0] via 10.202.1.2 [3] (recursive via H1_INET2 tunnel 100.64.12.1), 00:02:34
#                     [200/0] via 10.203.1.2 [3] (recursive via H1_MPLS tunnel 10.0.14.1), 00:02:34
#                     [200/0] via 10.201.2.2 [3] (recursive via H2_INET1 tunnel 100.64.21.2), 00:02:34
#                     [200/0] via 10.202.2.2 [3] (recursive via H2_INET2 tunnel 100.64.22.2), 00:02:34
#                     [200/0] via 10.203.2.1 [3] (recursive via H2_MPLS tunnel 10.0.24.2), 00:02:34
# B       10.1.0.0/24 [200/0] via 10.201.1.254 (recursive via H1_INET1 tunnel 100.64.11.1), 00:02:35
#                     [200/0] via 10.202.1.254 (recursive via H1_INET2 tunnel 100.64.12.1), 00:02:35
#                     [200/0] via 10.203.1.254 (recursive via H1_MPLS tunnel 10.0.14.1), 00:02:35
# B       10.2.0.0/24 [200/0] via 10.201.2.254 (recursive via H2_INET1 tunnel 100.64.21.2), 00:02:34
#                     [200/0] via 10.202.2.254 (recursive via H2_INET2 tunnel 100.64.22.2), 00:02:34
#                     [200/0] via 10.203.2.254 (recursive via H2_MPLS tunnel 10.0.24.2), 00:02:34
# B       10.200.0.0/14 [200/0] via 10.201.1.254 (recursive via H1_INET1 tunnel 100.64.11.1), 00:02:28
#                       [200/0] via 10.202.1.254 (recursive via H1_INET2 tunnel 100.64.12.1), 00:02:28
#                       [200/0] via 10.203.1.254 (recursive via H1_MPLS tunnel 10.0.14.1), 00:02:28
#                       [200/0] via 10.201.2.254 (recursive via H2_INET1 tunnel 100.64.21.2), 00:02:28
#                       [200/0] via 10.202.2.254 (recursive via H2_INET2 tunnel 100.64.22.2), 00:02:28
#                       [200/0] via 10.203.2.254 (recursive via H2_MPLS tunnel 10.0.24.2), 00:02:28
{% endif %}

{% if branch_id == 1 and FOS < 7_000_000 and cross_region_advpn %}
{% endif %}

{% if branch_id == 1 and FOS < 7_000_000 and not cross_region_advpn %}
{% endif %}

{% if branch_id == 2 and FOS >= 7_000_000 and cross_region_advpn %}
# FGT-W-BR2 # alias bgp_rib
# Routing table for VRF=0
# B       10.0.1.0/24 [200/0] via 10.201.1.1 [3] (recursive via H1_INET1 tunnel 100.64.11.1), 00:57:51
#                     [200/0] via 10.202.1.1 [3] (recursive via H1_INET2 tunnel 100.64.12.1), 00:57:51
#                     [200/0] via 10.203.1.1 [3] (recursive via H1_MPLS tunnel 10.0.14.1), 00:57:51
#                     [200/0] via 10.201.2.1 [3] (recursive via H2_INET1 tunnel 100.64.21.2), 00:57:51
#                     [200/0] via 10.202.2.1 [3] (recursive via H2_INET2 tunnel 100.64.22.2), 00:57:51
#                     [200/0] via 10.203.2.1 [3] (recursive via H2_MPLS tunnel 10.0.24.2), 00:57:51
# B       10.0.3.0/24 [200/0] via 10.201.3.1 [6] (recursive via H1_INET1 tunnel 100.64.11.1), 00:25:31
#                                                (recursive via H2_INET1 tunnel 100.64.21.2), 00:25:31
#                     [200/0] via 10.202.3.1 [6] (recursive via H1_INET2 tunnel 100.64.12.1), 00:25:31
#                                                (recursive via H2_INET2 tunnel 100.64.22.2), 00:25:31
#                     [200/0] via 10.203.3.1 [6] (recursive via H1_MPLS tunnel 10.0.14.1), 00:25:31
#                                                (recursive via H2_MPLS tunnel 10.0.24.2), 00:25:31
# B       10.1.0.0/24 [200/0] via 10.201.1.254 (recursive via H1_INET1 tunnel 100.64.11.1), 00:57:51
#                     [200/0] via 10.202.1.254 (recursive via H1_INET2 tunnel 100.64.12.1), 00:57:51
#                     [200/0] via 10.203.1.254 (recursive via H1_MPLS tunnel 10.0.14.1), 00:57:51
# B       10.2.0.0/24 [200/0] via 10.201.2.254 (recursive via H2_INET1 tunnel 100.64.21.2), 00:57:52
#                     [200/0] via 10.202.2.254 (recursive via H2_INET2 tunnel 100.64.22.2), 00:57:52
#                     [200/0] via 10.203.2.254 (recursive via H2_MPLS tunnel 10.0.24.2), 00:57:52
# B       10.3.0.0/24 [200/0] via 10.201.13.2 [3] (recursive via H1_INET1 tunnel 100.64.11.1), 00:25:31
#                                                 (recursive via H2_INET1 tunnel 100.64.21.2), 00:25:31
#                     [200/0] via 10.202.13.2 [3] (recursive via H1_INET2 tunnel 100.64.12.1), 00:25:31
#                                                 (recursive via H2_INET2 tunnel 100.64.22.2), 00:25:31
#                     [200/0] via 10.203.13.2 [3] (recursive via H1_MPLS tunnel 10.0.14.1), 00:25:31
#                                                 (recursive via H2_MPLS tunnel 10.0.24.2), 00:25:31
#                     [200/0] via 10.201.23.2 [3] (recursive via H1_INET1 tunnel 100.64.11.1), 00:25:31
#                                                 (recursive via H2_INET1 tunnel 100.64.21.2), 00:25:31
#                     [200/0] via 10.202.23.2 [3] (recursive via H1_INET2 tunnel 100.64.12.1), 00:25:31
#                                                 (recursive via H2_INET2 tunnel 100.64.22.2), 00:25:31
#                     [200/0] via 10.203.23.2 [3] (recursive via H1_MPLS tunnel 10.0.14.1), 00:25:31
#                                                 (recursive via H2_MPLS tunnel 10.0.24.2), 00:25:31
# B       10.200.0.0/14 [200/0] via 10.201.1.254 (recursive via H1_INET1 tunnel 100.64.11.1), 00:57:48
#                       [200/0] via 10.202.1.254 (recursive via H1_INET2 tunnel 100.64.12.1), 00:57:48
#                       [200/0] via 10.203.1.254 (recursive via H1_MPLS tunnel 10.0.14.1), 00:57:48
#                       [200/0] via 10.201.2.254 (recursive via H2_INET1 tunnel 100.64.21.2), 00:57:48
#                       [200/0] via 10.202.2.254 (recursive via H2_INET2 tunnel 100.64.22.2), 00:57:48
#                       [200/0] via 10.203.2.254 (recursive via H2_MPLS tunnel 10.0.24.2), 00:57:48
# B       10.201.0.0/16 [200/0] via 10.201.1.254 (recursive via H1_INET1 tunnel 100.64.11.1), 00:57:48
#                       [200/0] via 10.201.2.254 (recursive via H2_INET1 tunnel 100.64.21.2), 00:57:48
# B       10.202.0.0/16 [200/0] via 10.202.1.254 (recursive via H1_INET2 tunnel 100.64.12.1), 00:57:48
#                       [200/0] via 10.202.2.254 (recursive via H2_INET2 tunnel 100.64.22.2), 00:57:48
# B       10.203.0.0/16 [200/0] via 10.203.1.254 (recursive via H1_MPLS tunnel 10.0.14.1), 00:57:48
#                       [200/0] via 10.203.2.254 (recursive via H2_MPLS tunnel 10.0.24.2), 00:57:48
{% endif %}

{% if branch_id == 2 and FOS >= 7_000_000 and not cross_region_advpn %}
# FGT-W-BR2 # alias bgp_rib
# Routing table for VRF=0
# B       10.0.0.0/14 [200/0] via 10.201.1.254 (recursive via H1_INET1 tunnel 100.64.11.1), 00:07:52
#                     [200/0] via 10.202.1.254 (recursive via H1_INET2 tunnel 100.64.12.1), 00:07:52
#                     [200/0] via 10.203.1.254 (recursive via H1_MPLS tunnel 10.0.14.1), 00:07:52
#                     [200/0] via 10.201.2.254 (recursive via H2_INET1 tunnel 100.64.21.2), 00:07:52
#                     [200/0] via 10.202.2.254 (recursive via H2_INET2 tunnel 100.64.22.2), 00:07:52
#                     [200/0] via 10.203.2.254 (recursive via H2_MPLS tunnel 10.0.24.2), 00:07:52
# B       10.0.1.0/24 [200/0] via 10.201.1.1 [3] (recursive via H1_INET1 tunnel 100.64.11.1), 00:07:01
#                     [200/0] via 10.202.1.1 [3] (recursive via H1_INET2 tunnel 100.64.12.1), 00:07:01
#                     [200/0] via 10.203.1.1 [3] (recursive via H1_MPLS tunnel 10.0.14.1), 00:07:01
#                     [200/0] via 10.201.2.1 [3] (recursive via H2_INET1 tunnel 100.64.21.2), 00:07:01
#                     [200/0] via 10.202.2.1 [3] (recursive via H2_INET2 tunnel 100.64.22.2), 00:07:01
#                     [200/0] via 10.203.2.1 [3] (recursive via H2_MPLS tunnel 10.0.24.2), 00:07:01
# B       10.1.0.0/24 [200/0] via 10.201.1.254 (recursive via H1_INET1 tunnel 100.64.11.1), 00:07:52
#                     [200/0] via 10.202.1.254 (recursive via H1_INET2 tunnel 100.64.12.1), 00:07:52
#                     [200/0] via 10.203.1.254 (recursive via H1_MPLS tunnel 10.0.14.1), 00:07:52
# B       10.2.0.0/24 [200/0] via 10.201.2.254 (recursive via H2_INET1 tunnel 100.64.21.2), 00:07:53
#                     [200/0] via 10.202.2.254 (recursive via H2_INET2 tunnel 100.64.22.2), 00:07:53
#                     [200/0] via 10.203.2.254 (recursive via H2_MPLS tunnel 10.0.24.2), 00:07:53
# B       10.200.0.0/14 [200/0] via 10.201.1.254 (recursive via H1_INET1 tunnel 100.64.11.1), 00:07:52
#                       [200/0] via 10.202.1.254 (recursive via H1_INET2 tunnel 100.64.12.1), 00:07:52
#                       [200/0] via 10.203.1.254 (recursive via H1_MPLS tunnel 10.0.14.1), 00:07:52
#                       [200/0] via 10.201.2.254 (recursive via H2_INET1 tunnel 100.64.21.2), 00:07:52
#                       [200/0] via 10.202.2.254 (recursive via H2_INET2 tunnel 100.64.22.2), 00:07:52
#                       [200/0] via 10.203.2.254 (recursive via H2_MPLS tunnel 10.0.24.2), 00:07:52
{% endif %}

{% if branch_id == 2 and FOS < 7_000_000 and cross_region_advpn %}
{% endif %}

{% if branch_id == 2 and FOS < 7_000_000 and not cross_region_advpn %}
{% endif %}

{% if branch_id == 3 and FOS >= 7_000_000 and cross_region_advpn %}
# FGT-E-BR3 # alias bgp_rib
# Routing table for VRF=0
# B       10.0.1.0/24 [200/0] via 10.201.1.1 [3] (recursive via H1_INET1 tunnel 100.64.21.3), 00:26:00
#                     [200/0] via 10.201.2.1 [3] (recursive via H1_INET1 tunnel 100.64.21.3), 00:26:00
#                     [200/0] via 10.202.1.1 [3] (recursive via H1_INET2 tunnel 100.64.22.3), 00:26:00
#                     [200/0] via 10.202.2.1 [3] (recursive via H1_INET2 tunnel 100.64.22.3), 00:26:00
#                     [200/0] via 10.203.1.1 [3] (recursive via H1_MPLS tunnel 10.0.24.3), 00:26:00
#                     [200/0] via 10.203.2.1 [3] (recursive via H1_MPLS tunnel 10.0.24.3), 00:26:00
# B       10.0.2.0/24 [200/0] via 10.201.1.2 [3] (recursive via H1_INET1 tunnel 100.64.21.3), 00:26:00
#                     [200/0] via 10.201.2.2 [3] (recursive via H1_INET1 tunnel 100.64.21.3), 00:26:00
#                     [200/0] via 10.202.1.2 [3] (recursive via H1_INET2 tunnel 100.64.22.3), 00:26:00
#                     [200/0] via 10.202.2.2 [3] (recursive via H1_INET2 tunnel 100.64.22.3), 00:26:00
#                     [200/0] via 10.203.1.2 [3] (recursive via H1_MPLS tunnel 10.0.24.3), 00:26:00
#                     [200/0] via 10.203.2.2 [3] (recursive via H1_MPLS tunnel 10.0.24.3), 00:26:00
# B       10.1.0.0/24 [200/0] via 10.201.13.1 [3] (recursive via H1_INET1 tunnel 100.64.21.3), 00:26:00
#                     [200/0] via 10.202.13.1 [3] (recursive via H1_INET2 tunnel 100.64.22.3), 00:26:00
#                     [200/0] via 10.203.13.1 [3] (recursive via H1_MPLS tunnel 10.0.24.3), 00:26:00
# B       10.2.0.0/24 [200/0] via 10.201.23.1 [3] (recursive via H1_INET1 tunnel 100.64.21.3), 00:26:00
#                     [200/0] via 10.202.23.1 [3] (recursive via H1_INET2 tunnel 100.64.22.3), 00:26:00
#                     [200/0] via 10.203.23.1 [3] (recursive via H1_MPLS tunnel 10.0.24.3), 00:26:00
# B       10.3.0.0/24 [200/0] via 10.201.3.254 (recursive via H1_INET1 tunnel 100.64.21.3), 00:26:53
#                     [200/0] via 10.202.3.254 (recursive via H1_INET2 tunnel 100.64.22.3), 00:26:53
#                     [200/0] via 10.203.3.254 (recursive via H1_MPLS tunnel 10.0.24.3), 00:26:53
# B       10.200.0.0/14 [200/0] via 10.201.3.254 (recursive via H1_INET1 tunnel 100.64.21.3), 00:26:53
#                       [200/0] via 10.202.3.254 (recursive via H1_INET2 tunnel 100.64.22.3), 00:26:53
#                       [200/0] via 10.203.3.254 (recursive via H1_MPLS tunnel 10.0.24.3), 00:26:53
# B       10.201.0.0/16 [200/0] via 10.201.3.254 (recursive via H1_INET1 tunnel 100.64.21.3), 00:26:53
# B       10.202.0.0/16 [200/0] via 10.202.3.254 (recursive via H1_INET2 tunnel 100.64.22.3), 00:26:53
# B       10.203.0.0/16 [200/0] via 10.203.3.254 (recursive via H1_MPLS tunnel 10.0.24.3), 00:26:53
{% endif %}

{% if branch_id == 3 and FOS >= 7_000_000 and not cross_region_advpn %}
# FGT-E-BR3 # alias bgp_rib
# Routing table for VRF=0
# B       10.0.0.0/14 [200/0] via 10.201.3.254 (recursive via H1_INET1 tunnel 100.64.21.3), 00:04:10
#                     [200/0] via 10.202.3.254 (recursive via H1_INET2 tunnel 100.64.22.3), 00:04:10
#                     [200/0] via 10.203.3.254 (recursive via H1_MPLS tunnel 10.0.24.3), 00:04:10
# B       10.3.0.0/24 [200/0] via 10.201.3.254 (recursive via H1_INET1 tunnel 100.64.21.3), 00:04:10
#                     [200/0] via 10.202.3.254 (recursive via H1_INET2 tunnel 100.64.22.3), 00:04:10
#                     [200/0] via 10.203.3.254 (recursive via H1_MPLS tunnel 10.0.24.3), 00:04:10
# B       10.200.0.0/14 [200/0] via 10.201.3.254 (recursive via H1_INET1 tunnel 100.64.21.3), 00:04:10
#                       [200/0] via 10.202.3.254 (recursive via H1_INET2 tunnel 100.64.22.3), 00:04:10
#                       [200/0] via 10.203.3.254 (recursive via H1_MPLS tunnel 10.0.24.3), 00:04:10
{% endif %}

{% if branch_id == 3 and FOS < 7_000_000 and cross_region_advpn %}
{% endif %}

{% if branch_id == 3 and FOS < 7_000_000 and not cross_region_advpn %}
{% endif %}

